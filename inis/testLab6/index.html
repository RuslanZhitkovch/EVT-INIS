



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ИНИС</title>

</head>
<body>

<div id="myDiv" style="width: 100px; height: 100px; background-color: red;"></div>


<script>
    function dragElement(elmnt) {
        var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
        if (document.getElementById(elmnt.id + "-header")) {
            // если у элемента есть "шапка" для перетаскивания, добавляем обработчик события для начала перетаскивания
            document.getElementById(elmnt.id + "-header").onmousedown = dragMouseDown;
            document.getElementById(elmnt.id + "-header").addEventListener("touchstart", dragTouchStart, {passive: true});
        } else {
            // иначе, перемещение начинается на самом элементе
            elmnt.onmousedown = dragMouseDown;
            elmnt.addEventListener("touchstart", dragTouchStart, {passive: true});
        }

        function dragMouseDown(e) {
            e = e || window.event;
            e.preventDefault();
            // получаем начальные координаты курсора мыши
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            // вызываем функцию при перемещении мыши
            document.onmousemove = elementDrag;
        }

        function elementDrag(e) {
            e = e || window.event;
            e.preventDefault();
            // вычисляем новые позиции элемента
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            // устанавливаем новые позиции элемента
            elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
            elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
            // завершаем перемещение элемента при отпускании кнопки мыши
            document.onmouseup = null;
            document.onmousemove = null;
        }

        function dragTouchStart(e) {
            var touch = e.changedTouches[0];
            // получаем начальные координаты касания
            pos3 = touch.clientX;
            pos4 = touch.clientY;
            // добавляем обработчики для перемещения и завершения перемещения
            document.addEventListener("touchmove", dragTouchMove, {passive: true});
            document.addEventListener("touchend", dragTouchEnd, {passive: true});
        }

        function dragTouchMove(e) {
            var touch = e.changedTouches[0];
            // вычисляем новые позиции элемента
            pos1 = pos3 - touch.clientX;
            pos2 = pos4 - touch.clientY;
            pos3 = touch.clientX;
            pos4 = touch.clientY;
            // устанавливаем новые позиции элемента
            elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
            elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
        }

        function dragTouchEnd(e) {
            // удаляем обработчики событий touchmove и touchend из элемента
            this.removeEventListener("touchmove", dragTouchMove, { passive: true });
            this.removeEventListener("touchend", dragTouchEnd, { passive: true });

            // сбрасываем значения переменных
            startX = null;
            startY = null;
            currentX = null;
            currentY = null;
        }}

    var draggableElement = document.getElementById("myDiv");

    // вызываем функцию, чтобы сделать его перетаскиваемым
    dragElement(draggableElement);

</script>

</body>
</html>



